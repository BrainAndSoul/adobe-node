{"version":3,"file":"script-builder.js","sourceRoot":"","sources":["../src/script-builder.ts"],"names":[],"mappings":";;AAEA,IAAM,eAAe,GAAW,sPAaxB,CAAC;AAET,IAAM,qBAAqB,GAAG;IAE5B,IAAI,IAAY,CAAC;IACjB,IAAI,IAAY,CAAC;IACjB,IAAI,IAAY,CAAC;IACjB,IAAI,SAAiB,CAAC;IAEtB,IAAM,OAAO,GAAG;QACd,OAAO,EAAP,UAAQ,KAAa;YACnB,IAAI,GAAG,KAAK,CAAC;YACb,OAAO,OAAO,CAAC;QACjB,CAAC;QACD,YAAY,EAAZ,UAAa,KAAa;YACxB,IAAI,GAAG,KAAK,CAAC;YACb,OAAO,OAAO,CAAC;QACjB,CAAC;QACD,OAAO,EAAP,UAAQ,KAAa;YACnB,IAAI,GAAG,KAAK,CAAC;YACb,OAAO,OAAO,CAAC;QACjB,CAAC;QACD,YAAY,EAAZ,UAAa,KAAa;YACxB,SAAS,GAAG,KAAK,CAAC;YAClB,OAAO,OAAO,CAAC;QACjB,CAAC;QACD,KAAK;YACH,OAAO,eAAe;iBACnB,OAAO,CAAC,iBAAiB,EAAE,IAAI,CAAC;iBAChC,OAAO,CAAC,cAAc,EAAE,IAAI,CAAC;iBAC7B,OAAO,CAAC,YAAY,EAAE,IAAI,CAAC;iBAC3B,OAAO,CAAC,mBAAmB,EAAE,SAAS,CAAC,CAAC;QAC7C,CAAC;KACF,CAAA;IAED,OAAO,OAAO,CAAC;AACjB,CAAC,CAAA;AAED,kBAAe,qBAAqB,CAAC","sourcesContent":["import { AdobeScriptBuilder } from './api';\r\n\r\nconst commandTemplate: string = `\r\nvar ___{{__command__}} = (function() {\r\n    var __stderr;\r\n    var __stdout;\r\n    \r\n    try {\r\n      {{__vars__}}  \r\n      __stdout = {{__fn__}}\r\n    } catch (e) {\r\n      __stderr = e;\r\n    } finally {\r\n      {{__broadcast__}}\r\n    }\r\n  })();`;\r\n\r\nconst newAdobeScriptBuilder = (): AdobeScriptBuilder => {\r\n\r\n  let name: string;\r\n  let vars: string;\r\n  let body: string;\r\n  let broadcast: string;\r\n\r\n  const builder = {\r\n    setName(value: string) {\r\n      name = value;\r\n      return builder;\r\n    },\r\n    setVariables(value: string) {\r\n      vars = value;\r\n      return builder;\r\n    },\r\n    setBody(value: string) {\r\n      body = value;\r\n      return builder;\r\n    },\r\n    setBroadcast(value: string) {\r\n      broadcast = value;\r\n      return builder;\r\n    },\r\n    build() {\r\n      return commandTemplate\r\n        .replace('{{__command__}}', name)\r\n        .replace('{{__vars__}}', vars)\r\n        .replace('{{__fn__}}', body)\r\n        .replace('{{__broadcast__}}', broadcast);\r\n    }\r\n  }\r\n\r\n  return builder;\r\n}\r\n\r\nexport default newAdobeScriptBuilder;"]}